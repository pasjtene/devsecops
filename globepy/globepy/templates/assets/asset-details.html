{% extends 'layout/base.html' %} {% load static %} {% block content %}

<main id="main" class="main">
  <div class="pagetitle">
    <h1>Profile</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item">Dashboard</li>
        <li class="breadcrumb-item active">Asset</li>
        <li class="breadcrumb-item active">{{ asset.name }}</li>
      </ol>
    </nav>
  </div>
  <!-- End Page Title -->

  <section class="section profile">
    <div class="row">
      <div class="col-xl-4 offcanvas offcanvas-end show" id="demo">
        <div class="card">
          <div
            class="card-body profile-card pt-4 d-flex flex-column align-items-center"
          >
            <img
              src="{% static 'niceadmin/assets/img/profile-img.jpg' %}"
              alt="Profile"
              class="rounded-circle"
            />
            <h2>{{ asset.name }}</h2>
            <h3>{{ asset.category }}</h3>
            <div class="social-links mt-2">
              <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
              <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
              <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
              <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
              
            </div>
          </div>
        </div>
      </div>

      <div class="col-xl-8">
        <div class="card">
          <div class="card-body pt-3">
            <!-- Bordered Tabs -->
            <ul class="nav nav-tabs nav-tabs-bordered">
              <li class="nav-item">
                <button
                  class="nav-link active"
                  data-bs-toggle="tab"
                  data-bs-target="#profile-overview"
                >
                  Overview
                </button>
              </li>

              <li class="nav-item">
                <button
                  class="nav-link"
                  data-bs-toggle="tab"
                  data-bs-target="#profile-edit"
                >
                  Governance
                </button>
              </li>

              <li class="nav-item">
                <button
                  class="nav-link"
                  data-bs-toggle="tab"
                  data-bs-target="#profile-settings"
                >
                  Compliance
                </button>
              </li>

              <li class="nav-item">
                <button
                  class="nav-link"
                  data-bs-toggle="tab"
                  data-bs-target="#profile-change-password"
                >
                  Security Frameworks
                </button>
              </li>
            </ul>
            <div class="tab-content pt-2">
              <div
                class="tab-pane fade show active profile-overview"
                id="profile-overview"
              >
                <h5 class="card-title">About</h5>
                <p class="small fst-italic">{{ asset.description }}</p>

                <h5 class="card-title">Asset Details</h5>

                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Asset Name</div>
                  <div class="col-lg-9 col-md-8">{{ asset.name }}</div>
                </div>

                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Vendor</div>
                  <div class="col-lg-9 col-md-8">{{ asset.vendor }}</div>
                </div>

                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Impact Level</div>
                  <div class="col-lg-9 col-md-8">{{ asset.impact_level }}</div>
                </div>

                <div class="row">
                  <div class="col-lg-3 col-md-4 label">
                    Regulatory Frameworks
                  </div>
                  <div class="col-lg-9 col-md-8">
                    {% for framework in asset.regulatoryFrameworks.all %}
                    {{framework.title}}, {% endfor %}
                  </div>
                </div>

                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Country</div>
                  <div class="col-lg-9 col-md-8">USA</div>
                </div>

                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Address</div>
                  <div class="col-lg-9 col-md-8">
                    A108 Adam Street, New York, NY 535022
                  </div>
                </div>

                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Phone</div>
                  <div class="col-lg-9 col-md-8">(436) 486-3538 x29071</div>
                </div>

                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Email</div>
                  <div class="col-lg-9 col-md-8">k.anderson@example.com</div>
                </div>

                <div class="row">
                  <div class="col-lg-3 col-md-4 label">Email</div>
                  <div class="col-lg-9 col-md-8">k.anderson@example.com</div>
                  <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#demo">
                    Toggle Right Offcanvas
                  </button>
                </div>

                
              </div>

              <div class="tab-pane fade profile-edit pt-3" id="profile-edit">
                <!-- Profile Edit Form -->
                <form>
                  <div class="row mb-3">
                    <label
                      for="profileImage"
                      class="col-md-4 col-lg-3 col-form-label"
                      >Profile Image</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <img
                        src="{% static 'niceadmin/assets/img/profile-img.jpg' %}"
                        alt="Profile"
                      />
                      <div class="pt-2">
                        <a
                          href="#"
                          class="btn btn-primary btn-sm"
                          title="Upload new profile image"
                          ><i class="bi bi-upload"></i
                        ></a>
                        <a
                          href="#"
                          class="btn btn-danger btn-sm"
                          title="Remove my profile image"
                          ><i class="bi bi-trash"></i
                        ></a>
                      </div>
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label
                      for="fullName"
                      class="col-md-4 col-lg-3 col-form-label"
                      >Full Name</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="fullName"
                        type="text"
                        class="form-control"
                        id="fullName"
                        value="Kevin Anderson"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label for="about" class="col-md-4 col-lg-3 col-form-label"
                      >About</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <textarea
                        name="about"
                        class="form-control"
                        id="about"
                        style="height: 100px"
                      >
         test text area</textarea
                      >
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label
                      for="company"
                      class="col-md-4 col-lg-3 col-form-label"
                      >Company</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="company"
                        type="text"
                        class="form-control"
                        id="company"
                        value="Lueilwitz, Wisoky and Leuschke"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label for="Job" class="col-md-4 col-lg-3 col-form-label"
                      >Job</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="job"
                        type="text"
                        class="form-control"
                        id="Job"
                        value="Web Designer"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label
                      for="Country"
                      class="col-md-4 col-lg-3 col-form-label"
                      >Country</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="country"
                        type="text"
                        class="form-control"
                        id="Country"
                        value="USA"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label
                      for="Address"
                      class="col-md-4 col-lg-3 col-form-label"
                      >Address</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="address"
                        type="text"
                        class="form-control"
                        id="Address"
                        value="A108 Adam Street, New York, NY 535022"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label for="Phone" class="col-md-4 col-lg-3 col-form-label"
                      >Phone</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="phone"
                        type="text"
                        class="form-control"
                        id="Phone"
                        value="(436) 486-3538 x29071"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label for="Email" class="col-md-4 col-lg-3 col-form-label"
                      >Email</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="email"
                        type="email"
                        class="form-control"
                        id="Email"
                        value="k.anderson@example.com"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label
                      for="Twitter"
                      class="col-md-4 col-lg-3 col-form-label"
                      >Twitter Profile</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="twitter"
                        type="text"
                        class="form-control"
                        id="Twitter"
                        value="https://twitter.com/#"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label
                      for="Facebook"
                      class="col-md-4 col-lg-3 col-form-label"
                      >Facebook Profile</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="facebook"
                        type="text"
                        class="form-control"
                        id="Facebook"
                        value="https://facebook.com/#"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label
                      for="Instagram"
                      class="col-md-4 col-lg-3 col-form-label"
                      >Instagram Profile</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="instagram"
                        type="text"
                        class="form-control"
                        id="Instagram"
                        value="https://instagram.com/#"
                      />
                    </div>
                  </div>

                  <div class="row mb-3">
                    <label
                      for="Linkedin"
                      class="col-md-4 col-lg-3 col-form-label"
                      >Linkedin Profile</label
                    >
                    <div class="col-md-8 col-lg-9">
                      <input
                        name="linkedin"
                        type="text"
                        class="form-control"
                        id="Linkedin"
                        value="https://linkedin.com/#"
                      />
                    </div>
                  </div>

                  <div class="text-center">
                    <button type="submit" class="btn btn-primary">
                      Save Changes
                    </button>
                  </div>
                </form>
              </div>


             {% include 'assets/compliance-frameworks-list.html' %}

                <!-- End <!-- Compliance Frameworks Management --> -->
              </div>

              <div class="tab-pane fade pt-3" id="profile-change-password">
                <!-- Security Management Frameworks-->
                <div class="row mb-3" style="border: 1px solid blue">
                {% for sframework in asset.frameworks.all %}
               
                <hr>
                
                <div class="row">
                  <div class="col-sm-4" style="background-color: #F0F8FF; border: 5px solid #FFFFFF">
                    <a href="{% url 'iso27001_requirements' assetid=asset.id frameworkid=sframework.id frameworkname=sframework.framework_name %}">{{sframework.framework_name}}</a>  Description
                    
                    
                  </div>
                      <div class="col-sm-8" style="background-color: #F0F8FF; border: 5px solid #FFFFFF">
                        {{sframework.description}}
                        
                      </div>
                  
                  <hr>
                </div>
                
                  

                  <div class="requirement-description12 col-sm-12" >
                    <span class="text-bg-info col-sm-4" style="border: 1px solid green">
                     <a href="{{sframework.title}}">{{sframework.title}}</a>  implementation requirements
                    </span>
                    <div class="row">
                      {%for requirement in sframework.security_management_requirements.all|dictsort:"order" %}
                      {% if requirement.parent_requirement_id == None %}
                        
                          {% include 'assets/security-management-requirement.html' %}
                        
                        {% endif %} 
                      {% endfor %}  
                    </div>
                    <!-- This list only contains top level requirements (with no parent requirement) -->
                    
                    
                  </div> 

                  

                
                
                {% endfor %}  
              </div>
              
            </div>
               
              <!-- End Change Password Form -->
            </div>
          
          <!-- End Bordered Tabs -->
        </div>
      </div>
    </div>
  </div>
</section>
                                


<!-- Bootstrap Modal for Updating Comments -->
<div class="modal fade" id="updateCommentModal" tabindex="-1" aria-labelledby="updateCommentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="updateCommentModalLabel">Update Comment</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <form id="update-comment-form" method="post">
                  {% csrf_token %}
                  <textarea id="update-comment-text" class="form-control" rows="4"></textarea>
                  <button type="submit" class="btn btn-success mt-3">Update</button>
                  <button type="button" class="btn btn-secondary mt-3" data-bs-dismiss="modal">Cancel</button>
              </form>
          </div>
      </div>
  </div>
</div>

<!-- Bootstrap Modal for Deleting a Comments -->
<div class="modal fade" id="deleteCommentModal" tabindex="-1" aria-labelledby="deleteCommentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="deleteCommentModalLabel">Delete Comment ?</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <form id="delete-comment-form" method="post">
                  {% csrf_token %}
                  <textarea id="delete-comment-text" readonly class="form-control" rows="4"></textarea>
                  <button type="submit" class="btn btn-success mt-3">Delete</button>
                  <button type="button" class="btn btn-secondary mt-3" data-bs-dismiss="modal">Cancel</button>
              </form>
          </div>
      </div>
  </div>
</div>


  <div class="container mt-5">
    <h1>Comments</h1>
    <button id="add-comment-btn" class="btn btn-primary mb-3">Add Comment</button>
    <div id="comment-form" style="display: none;">

        <form method="post" action="{% url 'add_comment_json' assetid=asset.id %}" 
        id="comment-form-form-save" class="comment-form-form"
        data-delete-url="{% url 'delete_comment' comment_id=0 %}" data-role="comment"
        data-update-url="{% url 'update_comment' comment_id=0 %}">
       
          {% csrf_token %}
          <textarea id="comment-text" name="comment_text" 
          placeholder="Your repply comment.." required 
          class="form-control new-comment-text" rows="4"></textarea>
          <button id="submit-comment-btn" class="btn btn-success mt-3 submit-comment-btn">Submit json</button>
        </form>

    </div>

    <div class="mt-4" id="commentsList">
        {% for comment in comments %}
            {% include 'comments/comment_item.html' with comment=comment %}
        {% endfor %}
    </div>
</div>


</main>
<!-- End #main -->
{% endblock %}
